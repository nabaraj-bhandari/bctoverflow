generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Subject {
  code      String     @id
  resources Resource[]
}

model Resource {
  id          String
  subjectCode String
  title       String
  githubPath  String

  sections    Section[]
  subject     Subject   @relation(fields: [subjectCode], references: [code])

  @@id([subjectCode, id])
}

model Section {
  id          String
  resourceId  String
  subjectCode String
  title       String
  checksum    String
  resource    Resource @relation(fields: [subjectCode, resourceId], references: [subjectCode, id])

  @@id([subjectCode, resourceId, id])
}
